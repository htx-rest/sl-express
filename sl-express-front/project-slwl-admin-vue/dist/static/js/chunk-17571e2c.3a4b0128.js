(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-17571e2c"],{2934:function(t,e,a){"use strict";a.d(e,"e",(function(){return i})),a.d(e,"g",(function(){return r})),a.d(e,"f",(function(){return s})),a.d(e,"c",(function(){return o})),a.d(e,"d",(function(){return l})),a.d(e,"a",(function(){return c}));var n=a("b775"),i=function(t){return Object(n["a"])("/web-manager/common/transportLineType/simple","get",t)},r=function(t){return Object(n["a"])("/truckType/simple","get",t)},s=function(t){return Object(n["a"])("/common/user/simple","get",t)},o=function(t){return Object(n["a"])("/web-manager/common/fleet/simple","get",t)},l=function(t){return Object(n["a"])("/goodsType/simple","get",t)},c=function(t){return Object(n["a"])("/areas/children","get",t)}},4783:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"organization-manage org log-list customer-list-box dashboard-container"},[a("div",{staticClass:"test"},[a("div",{staticClass:"log-list-left"},[a("el-scrollbar",{staticStyle:{height:"100%",width:"100%"}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[a("div",{staticClass:"app-container"},[a("el-tree",{ref:"orgTree",staticClass:"filter-tree customer-tree-box",staticStyle:{"font-size":"12px"},attrs:{props:t.defaultProps,"check-strictly":!0,data:t.orgTree,indent:22,"filter-node-method":t.filterNode,"default-expand-all":"","highlight-current":"","node-key":"id","expand-on-click-node":!1},on:{"node-click":t.nodeClick}})],1)])],1)],1),t._v(" "),a("div",{staticClass:"log-list-right"},[a("el-card",{staticClass:"box-card",attrs:{shadow:"always"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("公司信息")])]),t._v(" "),a("div",[a("el-form",{ref:"form",staticClass:"form-bottom",staticStyle:{width:"90%","text-align":"center"},attrs:{model:t.org,"label-position":"right","label-width":"120px"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"机构编号"}},[a("el-input",{attrs:{disabled:""},model:{value:t.org.id,callback:function(e){t.$set(t.org,"id",e)},expression:"org.id"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"机构名称",prop:"parentId"}},[a("el-input",{attrs:{disabled:!t.isCanSubmit},model:{value:t.org.name,callback:function(e){t.$set(t.org,"name",e)},expression:"org.name"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"机构类型",prop:"orgType",disabled:""}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"",clearable:"",placeholder:"请选择"},model:{value:t.org.type,callback:function(e){t.$set(t.org,"type",e)},expression:"org.type"}},t._l(t.orgTypeOptions,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"机构地址",prop:"describe"}},[a("el-row",{staticStyle:{margin:"0"},attrs:{gutter:24}},[a("el-col",{staticStyle:{padding:"0"},attrs:{span:8}},[a("el-select",{attrs:{value:null!==t.org.province?t.org.province.id:"",placeholder:"请选择省","value-key":"id",clearable:"",disabled:!t.isCanSubmit},on:{change:function(e){return t.getCity(e,!0)}}},t._l(t.provinceList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),t._v(" "),a("el-col",{staticStyle:{padding:"0 4px"},attrs:{span:8}},[a("el-select",{attrs:{value:null!==t.org.city?t.org.city.id:"","value-key":"id",clearable:"",placeholder:"请选择市",disabled:!t.isCanSubmit},on:{change:function(e){return t.getCounty(e,!0)}}},t._l(t.cityList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),t._v(" "),a("el-col",{staticStyle:{padding:"0"},attrs:{span:8}},[a("el-select",{attrs:{value:t.countyId,"value-key":"id",clearable:"",placeholder:"请选择县/区",disabled:!t.isCanSubmit},on:{change:t.getCurrent}},t._l(t.countryList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"详细地址",prop:"address"}},[a("el-input",{attrs:{maxlength:"20",disabled:!t.isCanSubmit},model:{value:t.org.address,callback:function(e){t.$set(t.org,"address",e)},expression:"org.address"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"经度",prop:"longitude"}},[a("el-input",{attrs:{disabled:!(t.org.province.id&&t.org.city.id&&t.org.county.id&&t.org.address&&t.isCanSubmit),maxlength:"20"},model:{value:t.org.longitude,callback:function(e){t.$set(t.org,"longitude",e)},expression:"org.longitude"}},[a("span",{staticStyle:{color:"#20232a","font-weight":"400","font-size":"14px","font-family":"PingFangSC, PingFangSC-Regular","margin-right":"14px","line-height":"40px"},attrs:{slot:"suffix"},slot:"suffix"},[t._v("E")])])],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"纬度",prop:"latitude"}},[a("el-input",{attrs:{disabled:!(t.org.province.id&&t.org.city.id&&t.org.county.id&&t.org.address&&t.isCanSubmit),maxlength:"20"},model:{value:t.org.latitude,callback:function(e){t.$set(t.org,"latitude",e)},expression:"org.latitude"}},[a("span",{staticStyle:{color:"#20232a","font-weight":"400","font-size":"14px","font-family":"PingFangSC, PingFangSC-Regular","margin-right":"14px","line-height":"40px"},attrs:{slot:"suffix"},slot:"suffix"},[t._v("N")])])],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"机构负责人",prop:"contractNumber"}},[a("el-input",{attrs:{maxlength:"20",disabled:!t.isCanSubmit},model:{value:t.org.managerName,callback:function(e){t.$set(t.org,"managerName",e)},expression:"org.managerName"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"机构电话",prop:"abbreviation"}},[a("el-input",{attrs:{maxlength:"200",disabled:!t.isCanSubmit},model:{value:t.org.phone,callback:function(e){t.$set(t.org,"phone",e)},expression:"org.phone"}})],1)],1)],1),t._v(" "),t.org.id?a("el-button",{staticStyle:{width:"89px",height:"36px",padding:"10px 20px"},attrs:{type:"warning"},on:{click:t.submit}},[t._v(t._s(t.isCanSubmit?"保存":"编辑"))]):t._e()],1)],1)]),t._v(" "),a("el-card",{staticClass:"box-card org-index",staticStyle:{"margin-top":"20px","box-shadow":"none"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("员工信息")])]),t._v(" "),t.dataList&&t.dataList.length>0?a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.dataList,fit:"",stripe:"","header-cell-style":{background:"rgba(250,252,255,1)"}}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"60"}}),t._v(" "),a("el-table-column",{attrs:{align:"left",label:"员工编号","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.userId))])]}}],null,!1,1145735290)}),t._v(" "),a("el-table-column",{attrs:{align:"left",label:"员工姓名","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.name))])]}}],null,!1,2020036417)}),t._v(" "),a("el-table-column",{attrs:{align:"left",label:"手机号","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.mobile))])]}}],null,!1,2596132294)}),t._v(" "),a("el-table-column",{attrs:{align:"left",label:"所属机构","min-width":"140","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(null===e.row.agency?"":e.row.agency.name))])]}}],null,!1,691562540)}),t._v(" "),a("el-table-column",{attrs:{align:"left",label:"系统账户","min-width":"100",prop:"account"}}),t._v(" "),a("el-table-column",{attrs:{align:"left",label:"岗位类别","min-width":"100",prop:"stationName"}})],1):a("empty"),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.dataList&&t.dataList.length>0,expression:"dataList && dataList.length > 0"}],staticClass:"pagination"},[a("div",{staticClass:"pages"},[a("el-pagination",{attrs:{"current-page":Number(t.requestParameters.page),total:Number(t.total),"page-size":Number(t.requestParameters.pageSize),"page-sizes":[10,20,30,50],layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])],1)],1)])])},i=[],r=(a("e680"),a("a450"),a("98b2")),s=a("2934"),o=a("5850"),l={name:"OrgManager",data:function(){return{total:0,requestParameters:{page:1,pageSize:10,agencyId:""},dataList:[],defaultProps:{children:"children",label:"name"},countyId:"",name:"",orgTypeOptions:"",orgTree:[],parentName:"无上级",provinceList:[],cityList:[],countryList:[],isCanSubmit:!1,org:this.initOrg()}},mounted:function(){this.orgTypeOptions=r,this.initOrgTree()},methods:{initOrg:function(){return this.countyId="",{id:"",name:"",type:"",address:"",managerName:"",provinceId:"",cityId:"",countyId:"",phone:"",parentId:0,latitude:"",longitude:"",county:{id:""},province:{id:""},city:{id:""}}},submit:function(){var t=this,e=this.org,a={id:e.id,name:e.name,type:e.type,provinceId:e.province?e.province.id:"",cityId:e.province?e.city.id:"",countyId:e.county?e.county.id:"",address:e.address,longitude:e.longitude,latitude:e.latitude,managerName:e.managerName,phone:e.phone};return console.log(e,"data"),e.address?e.province.id&&e.city.id&&e.county.id?void(this.isCanSubmit?Object(o["d"])(a).then((function(e){200===Number(e.code)?(t.$message.success("机构信息保存成功"),t.isCanSubmit=!1):t.$message.error(e.msg||"机构信息保存失败")})).catch((function(e){t.$message.error(e.msg||"机构信息保存失败")})):this.isCanSubmit=!this.isCanSubmit):this.$message.error("请选择机构地址"):this.$message.error("请填写详细地址")},getProvince:function(t){var e=this;Object(s["a"])({parentId:t}).then((function(t){console.log(t,"responseresponse"),e.provinceList=t.data}))},getCity:function(t,e){var a=this;console.log(t,e,"sss"),Object(s["a"])({parentId:t}).then((function(n){console.log(n,"responseresponse"),a.cityList=n.data,a.org.province.id=t,e&&(a.org.city.id="",a.countyId="")}))},getCounty:function(t,e){var a=this;Object(s["a"])({parentId:t}).then((function(n){console.log(n,"responseresponse"),a.countryList=n.data,a.org.city.id=t,e&&(a.countyId="")}))},getCurrent:function(t){console.log(t,"vallll"),this.org.county.id=t,this.countyId=t},initOrgTree:function(){var t=this;Object(o["a"])({}).then((function(e){var a=e.data;console.log(a,"JSON.parse(res.data)"),t.orgTree=JSON.parse(a)}))},exportExcel:function(){this.$message({message:"待完善",type:"warning"})},handleNumChange:function(t){this.org.sortValue=t},filterNode:function(t,e){return console.log(t,e,"66666666666666666666"),!t||-1!==e.name.indexOf(t)},nodeClick:function(t){var e=this;this.requestParameters.agencyId=t.id,Object(o["b"])(t.id).then((function(t){e.org=t.data,e.countyId="",null===t.data.province&&(e.org.province={}),null===t.data.city&&(e.org.city={}),null===t.data.county&&(e.org.county={}),e.getProvince(),null!==t.data.city&&t.data.city.id&&(e.getCity(t.data.province.id,!1),e.getCounty(t.data.city.id,!1)),null!==t.data.county&&t.data.county.id&&(e.countyId=t.data.county.id)})).catch((function(){e.$message.error("获取机构详情失败"),e.org=e.initOrg()})),this.getList()},getList:function(){var t=this;Object(o["c"])(this.requestParameters).then((function(e){t.dataList=e.data.items,t.total=e.data.counts,console.log(e,"resssssssss")}))},search:function(){this.$refs.orgTree.filter(this.name)},reset:function(){this.initOrgTree(),this.name="",this.resetForm()},resetForm:function(){this.$refs.form.clearValidate(),this.$refs.form.resetFields(),this.org=this.initOrg()},handleSizeChange:function(t){this.requestParameters.pageSize=t,1===this.requestParameters.page&&this.getList(this.requestParameters)},handleCurrentChange:function(t){this.requestParameters.page=t,this.getList()}}},c=l,d=(a("d169"),a("cba8")),u=Object(d["a"])(c,n,i,!1,null,"afe0d4c2",null);e["default"]=u.exports},5850:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return s})),a.d(e,"d",(function(){return o}));var n=a("b775"),i=function(t){return Object(n["a"])("/business-hall/tree","get",t)},r=function(t){return Object(n["a"])("/business-hall/".concat(t),"get",t)},s=function(t){return Object(n["a"])("/business-hall/user/page","get",t)},o=function(t){return Object(n["a"])("/business-hall","post",t)}},"98b2":function(t){t.exports=[{id:1,name:"一级转运中心"},{id:2,name:"二级转运中心"},{id:3,name:"网点"}]},d169:function(t,e,a){"use strict";a("f9d2")},f9d2:function(t,e,a){}}]);